<extensionManifest><groupId>com.sensys.nifi</groupId><artifactId>nifi-custom-putdbrecord-nar</artifactId><version>1.0.0</version><parentNar><groupId>org.apache.nifi</groupId><artifactId>nifi-standard-services-api-nar</artifactId><version>2.1.0</version></parentNar><systemApiVersion>2.0.0</systemApiVersion><buildInfo></buildInfo><extensions><extension><name>com.sensys.nifi.processors.ValidatedPutDatabaseRecord</name><type>PROCESSOR</type><description>Puts records into a target database with environment validation. Extends the standard PutDatabaseRecord processor to validate that controller services match the expected environment configuration by querying the SSE Engine database using operation_id from FlowFile attributes. Retains all original PutDatabaseRecord functionality.</description><tags><tag>database</tag><tag>put</tag><tag>upsert</tag><tag>validation</tag><tag>environment</tag><tag>sensys</tag><tag>sse</tag></tags><properties><property><name>enable-validation</name><displayName>Enable Validation</displayName><description>Enable or disable environment validation before executing database operations.</description><defaultValue>true</defaultValue><allowableValues><allowableValue><displayName>true</displayName><value>true</value><description></description></allowableValue><allowableValue><displayName>false</displayName><value>false</value><description></description></allowableValue></allowableValues><required>true</required><sensitive>false</sensitive><expressionLanguageSupported>false</expressionLanguageSupported><expressionLanguageScope>NONE</expressionLanguageScope><dynamicallyModifiesClasspath>false</dynamicallyModifiesClasspath><dynamic>false</dynamic></property><property><name>operation-id</name><displayName>Operation ID</displayName><description>FlowFile attribute name/value used to look up environment configuration in the SSE Engine database.</description><defaultValue>${operation.id}</defaultValue><required>true</required><sensitive>false</sensitive><expressionLanguageSupported>true</expressionLanguageSupported><expressionLanguageScope>FLOWFILE_ATTRIBUTES</expressionLanguageScope><dynamicallyModifiesClasspath>false</dynamicallyModifiesClasspath><dynamic>false</dynamic></property><property><name>engine-dbcp-service</name><displayName>SSE Engine Database Connection Pool</displayName><description>DBCP Controller Service for connecting to the SSE Engine (metadata) database.</description><controllerServiceDefinition><className>org.apache.nifi.dbcp.DBCPService</className><groupId>org.apache.nifi</groupId><artifactId>nifi-standard-services-api-nar</artifactId><version>2.1.0</version></controllerServiceDefinition><required>true</required><sensitive>false</sensitive><expressionLanguageSupported>false</expressionLanguageSupported><expressionLanguageScope>NONE</expressionLanguageScope><dynamicallyModifiesClasspath>false</dynamicallyModifiesClasspath><dynamic>false</dynamic></property><property><name>source-dbcp-service</name><displayName>Source Database Connection Pool</displayName><description>DBCP Controller Service for the SOURCE database to validate against environment configuration.</description><controllerServiceDefinition><className>org.apache.nifi.dbcp.DBCPService</className><groupId>org.apache.nifi</groupId><artifactId>nifi-standard-services-api-nar</artifactId><version>2.1.0</version></controllerServiceDefinition><required>true</required><sensitive>false</sensitive><expressionLanguageSupported>false</expressionLanguageSupported><expressionLanguageScope>NONE</expressionLanguageScope><dynamicallyModifiesClasspath>false</dynamicallyModifiesClasspath><dynamic>false</dynamic></property><property><name>target-dbcp-service</name><displayName>Target Database Connection Pool (Validation)</displayName><description>DBCP Controller Service for the TARGET database to validate against environment configuration. This does not replace the main Database Connection Pooling Service used for writes.</description><controllerServiceDefinition><className>org.apache.nifi.dbcp.DBCPService</className><groupId>org.apache.nifi</groupId><artifactId>nifi-standard-services-api-nar</artifactId><version>2.1.0</version></controllerServiceDefinition><required>true</required><sensitive>false</sensitive><expressionLanguageSupported>false</expressionLanguageSupported><expressionLanguageScope>NONE</expressionLanguageScope><dynamicallyModifiesClasspath>false</dynamicallyModifiesClasspath><dynamic>false</dynamic></property><property><name>validation-mode</name><displayName>Validation Mode</displayName><description>STRICT routes to 'validation_failed' on mismatch; WARNING logs and proceeds.</description><defaultValue>STRICT</defaultValue><allowableValues><allowableValue><displayName>STRICT</displayName><value>STRICT</value><description></description></allowableValue><allowableValue><displayName>WARNING</displayName><value>WARNING</value><description></description></allowableValue></allowableValues><required>true</required><sensitive>false</sensitive><expressionLanguageSupported>false</expressionLanguageSupported><expressionLanguageScope>NONE</expressionLanguageScope><dynamicallyModifiesClasspath>false</dynamicallyModifiesClasspath><dynamic>false</dynamic></property><property><name>Database Connection Pooling Service</name><displayName>Database Connection Pooling Service</displayName><description>The Controller Service that is used to obtain a connection to the database</description><controllerServiceDefinition><className>org.apache.nifi.dbcp.DBCPService</className><groupId>org.apache.nifi</groupId><artifactId>nifi-standard-services-api-nar</artifactId><version>2.1.0</version></controllerServiceDefinition><required>true</required><sensitive>false</sensitive><expressionLanguageSupported>false</expressionLanguageSupported><expressionLanguageScope>NONE</expressionLanguageScope><dynamicallyModifiesClasspath>false</dynamicallyModifiesClasspath><dynamic>false</dynamic></property><property><name>Table Name</name><displayName>Table Name</displayName><description>The name of the table to insert records into</description><required>true</required><sensitive>false</sensitive><expressionLanguageSupported>true</expressionLanguageSupported><expressionLanguageScope>FLOWFILE_ATTRIBUTES</expressionLanguageScope><dynamicallyModifiesClasspath>false</dynamicallyModifiesClasspath><dynamic>false</dynamic></property></properties><relationships><relationship><name>retry</name><description>FlowFile that should be retried</description><autoTerminated>false</autoTerminated></relationship><relationship><name>success</name><description>Successfully processed FlowFile</description><autoTerminated>false</autoTerminated></relationship><relationship><name>failure</name><description>FlowFile that failed processing</description><autoTerminated>false</autoTerminated></relationship><relationship><name>validation_failed</name><description>FlowFiles that fail environment validation are routed to this relationship</description><autoTerminated>false</autoTerminated></relationship></relationships><readsAttributes><readsAttribute><name>operation.id</name><description>Operation ID used to look up environment configuration</description></readsAttribute></readsAttributes><writesAttributes><writesAttribute><name>validation.passed</name><description>true if validation passed</description></writesAttribute></writesAttributes><inputRequirement>INPUT_REQUIRED</inputRequirement><useCases><useCase><description>Insert records into a database with environment validation</description><notes></notes><keywords></keywords><inputRequirement>INPUT_ALLOWED</inputRequirement><configuration></configuration></useCase></useCases></extension></extensions></extensionManifest>